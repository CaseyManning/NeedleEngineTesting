{
  "version": 3,
  "sources": ["../../../../Library/PackageCache/com.needle.engine@2.7.3-pre/package~/node_modules/three/examples/jsm/interactive/InteractiveGroup.js"],
  "sourcesContent": ["import {\n\tGroup,\n\tMatrix4,\n\tRaycaster,\n\tVector2\n} from 'three';\n\nconst _pointer = new Vector2();\nconst _event = { type: '', data: _pointer };\n\nclass InteractiveGroup extends Group {\n\n\tconstructor( renderer, camera ) {\n\n\t\tsuper();\n\n\t\tconst scope = this;\n\n\t\tconst raycaster = new Raycaster();\n\t\tconst tempMatrix = new Matrix4();\n\n\t\t// Pointer Events\n\n\t\tconst element = renderer.domElement;\n\n\t\tfunction onPointerEvent( event ) {\n\n\t\t\tevent.stopPropagation();\n\n\t\t\t_pointer.x = ( event.clientX / element.clientWidth ) * 2 - 1;\n\t\t\t_pointer.y = - ( event.clientY / element.clientHeight ) * 2 + 1;\n\n\t\t\traycaster.setFromCamera( _pointer, camera );\n\n\t\t\tconst intersects = raycaster.intersectObjects( scope.children, false );\n\n\t\t\tif ( intersects.length > 0 ) {\n\n\t\t\t\tconst intersection = intersects[ 0 ];\n\n\t\t\t\tconst object = intersection.object;\n\t\t\t\tconst uv = intersection.uv;\n\n\t\t\t\t_event.type = event.type;\n\t\t\t\t_event.data.set( uv.x, 1 - uv.y );\n\n\t\t\t\tobject.dispatchEvent( _event );\n\n\t\t\t}\n\n\t\t}\n\n\t\telement.addEventListener( 'pointerdown', onPointerEvent );\n\t\telement.addEventListener( 'pointerup', onPointerEvent );\n\t\telement.addEventListener( 'pointermove', onPointerEvent );\n\t\telement.addEventListener( 'mousedown', onPointerEvent );\n\t\telement.addEventListener( 'mouseup', onPointerEvent );\n\t\telement.addEventListener( 'mousemove', onPointerEvent );\n\t\telement.addEventListener( 'click', onPointerEvent );\n\n\t\t// WebXR Controller Events\n\t\t// TODO: Dispatch pointerevents too\n\n\t\tconst events = {\n\t\t\t'move': 'mousemove',\n\t\t\t'select': 'click',\n\t\t\t'selectstart': 'mousedown',\n\t\t\t'selectend': 'mouseup'\n\t\t};\n\n\t\tfunction onXRControllerEvent( event ) {\n\n\t\t\tconst controller = event.target;\n\n\t\t\ttempMatrix.identity().extractRotation( controller.matrixWorld );\n\n\t\t\traycaster.ray.origin.setFromMatrixPosition( controller.matrixWorld );\n\t\t\traycaster.ray.direction.set( 0, 0, - 1 ).applyMatrix4( tempMatrix );\n\n\t\t\tconst intersections = raycaster.intersectObjects( scope.children, false );\n\n\t\t\tif ( intersections.length > 0 ) {\n\n\t\t\t\tconst intersection = intersections[ 0 ];\n\n\t\t\t\tconst object = intersection.object;\n\t\t\t\tconst uv = intersection.uv;\n\n\t\t\t\t_event.type = events[ event.type ];\n\t\t\t\t_event.data.set( uv.x, 1 - uv.y );\n\n\t\t\t\tobject.dispatchEvent( _event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst controller1 = renderer.xr.getController( 0 );\n\t\tcontroller1.addEventListener( 'move', onXRControllerEvent );\n\t\tcontroller1.addEventListener( 'select', onXRControllerEvent );\n\t\tcontroller1.addEventListener( 'selectstart', onXRControllerEvent );\n\t\tcontroller1.addEventListener( 'selectend', onXRControllerEvent );\n\n\t\tconst controller2 = renderer.xr.getController( 1 );\n\t\tcontroller2.addEventListener( 'move', onXRControllerEvent );\n\t\tcontroller2.addEventListener( 'select', onXRControllerEvent );\n\t\tcontroller2.addEventListener( 'selectstart', onXRControllerEvent );\n\t\tcontroller2.addEventListener( 'selectend', onXRControllerEvent );\n\n\t}\n\n}\n\nexport { InteractiveGroup };\n"],
  "mappings": ";;;;;;;;;AAOA,IAAM,WAAW,IAAI;AACrB,IAAM,SAAS,EAAE,MAAM,IAAI,MAAM;AAEjC,qCAA+B,MAAM;AAAA,EAEpC,YAAa,UAAU,QAAS;AAE/B;AAEA,UAAM,QAAQ;AAEd,UAAM,YAAY,IAAI;AACtB,UAAM,aAAa,IAAI;AAIvB,UAAM,UAAU,SAAS;AAEzB,4BAAyB,OAAQ;AAEhC,YAAM;AAEN,eAAS,IAAM,MAAM,UAAU,QAAQ,cAAgB,IAAI;AAC3D,eAAS,IAAI,CAAI,OAAM,UAAU,QAAQ,gBAAiB,IAAI;AAE9D,gBAAU,cAAe,UAAU;AAEnC,YAAM,aAAa,UAAU,iBAAkB,MAAM,UAAU;AAE/D,UAAK,WAAW,SAAS,GAAI;AAE5B,cAAM,eAAe,WAAY;AAEjC,cAAM,SAAS,aAAa;AAC5B,cAAM,KAAK,aAAa;AAExB,eAAO,OAAO,MAAM;AACpB,eAAO,KAAK,IAAK,GAAG,GAAG,IAAI,GAAG;AAE9B,eAAO,cAAe;AAAA;AAAA;AAMxB,YAAQ,iBAAkB,eAAe;AACzC,YAAQ,iBAAkB,aAAa;AACvC,YAAQ,iBAAkB,eAAe;AACzC,YAAQ,iBAAkB,aAAa;AACvC,YAAQ,iBAAkB,WAAW;AACrC,YAAQ,iBAAkB,aAAa;AACvC,YAAQ,iBAAkB,SAAS;AAKnC,UAAM,SAAS;AAAA,MACd,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,eAAe;AAAA,MACf,aAAa;AAAA;AAGd,iCAA8B,OAAQ;AAErC,YAAM,aAAa,MAAM;AAEzB,iBAAW,WAAW,gBAAiB,WAAW;AAElD,gBAAU,IAAI,OAAO,sBAAuB,WAAW;AACvD,gBAAU,IAAI,UAAU,IAAK,GAAG,GAAG,IAAM,aAAc;AAEvD,YAAM,gBAAgB,UAAU,iBAAkB,MAAM,UAAU;AAElE,UAAK,cAAc,SAAS,GAAI;AAE/B,cAAM,eAAe,cAAe;AAEpC,cAAM,SAAS,aAAa;AAC5B,cAAM,KAAK,aAAa;AAExB,eAAO,OAAO,OAAQ,MAAM;AAC5B,eAAO,KAAK,IAAK,GAAG,GAAG,IAAI,GAAG;AAE9B,eAAO,cAAe;AAAA;AAAA;AAMxB,UAAM,cAAc,SAAS,GAAG,cAAe;AAC/C,gBAAY,iBAAkB,QAAQ;AACtC,gBAAY,iBAAkB,UAAU;AACxC,gBAAY,iBAAkB,eAAe;AAC7C,gBAAY,iBAAkB,aAAa;AAE3C,UAAM,cAAc,SAAS,GAAG,cAAe;AAC/C,gBAAY,iBAAkB,QAAQ;AACtC,gBAAY,iBAAkB,UAAU;AACxC,gBAAY,iBAAkB,eAAe;AAC7C,gBAAY,iBAAkB,aAAa;AAAA;AAAA;",
  "names": []
}
